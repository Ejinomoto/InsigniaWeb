<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Page</title>
    <link rel="stylesheet" href="assets/css/style-product.css" />
    <!-- icon dari font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- icon dari font awesome -->
  </head>

  <body>
    <header>
      <div class="logo-container">
        <a href="#" class="logo">
          <img src="assets/images/logo-istana.png" alt="vroom logo" />
        </a>
        <div class="header-actions">
          <span class="call-us"
            >Call us: <br />
            Free Support (012) 800-456-789</span
          >
          <a href="#" class="cart">
            <span><i class="fa-solid fa-cart-shopping"></i></span>
          </a>
        </div>
      </div>
      <div class="navbar-container">
        <nav>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#" class="active">Shop</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </nav>
        <div class="search-bar">
          <input type="text" placeholder="Search for products..." />
        </div>
      </div>
      <div class="title-container">
        <h1>Product Detail</h1>
        <h3><a href="index.html" id="link">Home</a> / Shop</h3>
      </div>
    </header>
    <div class="main-wrapper">
      <a href="catalog.html">
        <button class="custom-btn btn-3">
          <span><i class="fa-solid fa-caret-left"></i> Back</span>
        </button>
      </a>
      <div class="container-p-detail">
        <div class="product-div">
          <div class="product-div-left">
            <div class="img-product-container img-container">
              <img id="product-image" src="" alt="product image" />
            </div>
            <div class="hover-container" id="gallery-container"></div>
          </div>
          <div class="product-div-right">
            <span id="product-name" class="product-nama" style="color: #1d293f"></span>
            <span id="product-original" class="product-disc" style="color: #e32a2ae2; text-decoration: line-through; margin-bottom: 10px"></span>
            <span id="product-price" class="product-harga" style="color: #1d293f"></span>
            <div id="product-rating" class="product-rate" style="color: #1d293f"></div>
            <p class="product-desc" style="color: #1d293f" id="product-desc"></p>
            <div type="button" class="btn-groups">
              <button class="add-cart-btn"><i class="fas fa-shopping-cart"></i> Add to Cart</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const productData = JSON.parse(localStorage.getItem("selectedProduct"));

        if (productData) {
          document.getElementById("product-name").textContent = productData.name;
          document.getElementById("product-desc").textContent = productData.desc;
          document.getElementById("product-original").textContent = productData.original;
          document.getElementById("product-price").textContent = productData.price;
          document.getElementById("product-image").src = productData.image;

          let ratingHtml = "";
          for (let i = 0; i < Math.floor(productData.rating); i++) {
            ratingHtml += '<span class="fas fa-star"></span>';
          }
          for (let i = 0; i < 5 - Math.floor(productData.rating); i++) {
            ratingHtml += '<span class="far fa-star"></span>';
          }
          document.getElementById("product-rating").innerHTML = ratingHtml;

          const galleryContainer = document.getElementById("gallery-container");
          if (productData.gallery && productData.gallery.length > 0) {
            productData.gallery.forEach((mediaSrc, index) => {
              const divElement = document.createElement("div");

              if (mediaSrc.includes("youtube.com") || mediaSrc.includes("youtu.be")) {
                const iframeElement = document.createElement("iframe");
                const videoId = mediaSrc.split("v=")[1] || mediaSrc.split("/")[3];
                iframeElement.src = `https://www.youtube.com/embed/${videoId}?controls=0`;
                iframeElement.classList.add("gallery-video");
                divElement.appendChild(iframeElement);
              } else if (mediaSrc.endsWith(".mp4")) {
                const videoElement = document.createElement("video");
                videoElement.src = mediaSrc;
                videoElement.width = 350;
                videoElement.controls = false;
                videoElement.classList.add("gallery-video");
                divElement.appendChild(videoElement);
              } else {
                const imgElement = document.createElement("img");
                imgElement.src = mediaSrc;
                imgElement.alt = `product gallery media ${index + 1}`;
                imgElement.classList.add("gallery-image");
                divElement.appendChild(imgElement);
              }

              galleryContainer.appendChild(divElement);
            });

            const allHoverElements = document.querySelectorAll(".hover-container div img, .hover-container div iframe, .hover-container div video");
            const imgContainer = document.querySelector(".img-product-container");

            allHoverElements[0].parentElement.classList.add("active");

            allHoverElements.forEach((mediaElement) => {
              mediaElement.addEventListener("mouseover", () => {
                if (mediaElement.tagName === "IMG") {
                  imgContainer.querySelector("img").src = mediaElement.src;
                } else if (mediaElement.tagName === "IFRAME") {
                  const fullSizeIframe = mediaElement.cloneNode(true);
                  fullSizeIframe.src = fullSizeIframe.src.replace("?controls=0", "");
                  fullSizeIframe.style.width = "350px";
                  fullSizeIframe.style.height = "200px";
                  imgContainer.innerHTML = fullSizeIframe.outerHTML;
                } else if (mediaElement.tagName === "VIDEO") {
                  imgContainer.innerHTML = mediaElement.outerHTML;
                }

                resetActiveMedia();
                mediaElement.parentElement.classList.add("active");
              });
            });

            function resetActiveMedia() {
              allHoverElements.forEach((media) => {
                media.parentElement.classList.remove("active");
              });
            }
          }
        }
      });
    </script>

    <footer>
      <div class="footer-container">
        <div class="footer-col">
          <img src="assets/images/logo-istana-plain.png" alt="" />
        </div>
        <div class="footer-col">
          <h4>About Us</h4>
          <p>Istana Komputer bergerak di bidang IT & Multimedia. Menyewakan perangkat untuk keperluan berbagai acara seperti seminar, pameran, meeting dan lain sebagainya. Melayani sewa harian, bulanan dan tahunan.</p>
        </div>
        <div class="footer-col">
          <h4>Menus</h4>
          <li><a href="index.html">Home</a></li>
          <li><a href="catalog.html">Shop</a></li>
          <li><a href="contact-us.html">Contact</a></li>
          <li><a href="about-us.html">About</a></li>
        </div>
        <div class="footer-col">
          <h4>Get in Touch</h4>
          <p>Phone: 0812-1084-6420</p>
          <p>Email: iskomsarananusantara@gmail.com</p>
          <p>Address: Jl.Bukti No 29 B , Kp. Makasar , Jaktim, DKI Jakarta.</p>
        </div>
        <div class="footer-col">
          <h4>Follow Us</h4>
          <ul>
            <a target="_blank" href="https://www.facebook.com/profile.php?id=100063576776044"><i class="fa-brands fa-facebook"></i></a>

            <a target="_blank" href="https://www.instagram.com/istana_komputer/"><i class="fa-brands fa-instagram"></i></a>

            <a target="_blank" href="https://x.com/komputeristana"><i class="fa-brands fa-twitter"></i></a>
          </ul>
        </div>
      </div>
    </footer>
  </body>
  <script src="/assets/js/scripts.js"></script>
</html>
